import exocounts
import planet
import convmag

import numpy as np

habex=exocounts.InstClass()
habex.lamb = 0.5 #micron
habex.dlam = 0.1 #micron
habex.dtel = 4.0 #telescope diameter m
habex.dstel = 0.00 #secondary telescope diameter m
habex.throughput = 0.3
habex.ndark = 2.e-5 #dark current [e-/pix/s]
habex.nread = 0.008 #nr [e-/pix/read]
habex.fullwell = 1.e7

target=exocounts.TargetClass()
target.teff = 5800.0 #K
target.rstar = 1.0 #Rsolar
target.dpc = 5.0 #pc

planet=planet.PlanetClass()


obs=exocounts.ObsClass(habex,target) 

obs.texposure = 0.3 #=18min cadence [hour]
obs.tframe = 6.0  #time for one frame [sec]
obs.napix = 10 # number of the pixels in aperture 
obs.mu = 1 
obs.effnpix = 0.5

obs.target = target
obs.update()

magdict=convmag.get_magdict()
print("magnitude=",convmag.get_mag("V",obs.flux,magdict))

print(obs.nphoton_brightest/habex.fullwell)
print(obs.sat)
print("shot noise (sigma)=",obs.sign)
print("shot noise (dark)=",obs.sigd)
print("shot noise (read)=",obs.sigr)
